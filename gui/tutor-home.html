<html>

<title>Tutoring at UCI</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no'/>

<style type="text/css">
#container {
  width: 100%;
  height: 100%;
  }
#search{
width: 100%;
top:10px;
position:absolute;
}
#info {
left:0px
display: block;
position: relative;
margin: 0px auto;
width: 50%;
padding: 10px;
border: none;
border-radius: 3px;
font-size: 12px;
text-align: center;
color: #222;
background: #fff;
}
#marker {
background-color: blue;
background-size: cover;
width: 5px;
height: 5px;
border-radius: 50%;
cursor: pointer;
}
</style>

<body style="line-height: 0;">
<div id="map" style="width:100vw; height: 100vh"></div>
</body>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
<link href="https://getbootstrap.com/docs/4.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.50.0/mapbox-gl.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.50.0/mapbox-gl.css' rel='stylesheet'/>
<script>

let socket = new WebSocket("ws://localhost:9080/api/push");

mapboxgl.accessToken = 'pk.eyJ1IjoiamVyZW15bGkiLCJhIjoiY2lrZ2U4MWI4MDA4bHVjajc1am1weTM2aSJ9.JHiBmawEKGsn3jiRK_d0Gw';
const map = new mapboxgl.Map({
      container: 'map',
      style: 'mapbox://styles/mapbox/light-v9',
      center: [-117.842841, 33.64585],
      zoom: 15
    });



function onRequestTutor(data) {
  console.log(data);
}
  
socket.onopen = function(e) {
  console.log("ws established");
};

socket.onmessage = function(event) {
  console.log(event.data);

  var dataStr = event.data;
  
  onRequestTutor(JSON.parse(dataStr));

};

socket.onclose = function(event) {
  console.log("ws closed");
};




</script>

</html>